<app-navigation></app-navigation>
<div class="container mx-auto p-4">
    <div class="bg-white p-4 rounded shadow">
        <h1 class="text-2xl font-bold mb-4">
            Giỏ hàng
        </h1>
        <div class="flex flex-col lg:flex-row lg:justify-between">
            <div class="flex-1">
                <div *ngFor="let item of productCart" class="flex items-center border-b pb-4 mb-4">
                    <div class="flex-1">
                        <p>
                            {{ item.product_name }}
                        </p>
                    </div>
                    <div class="text-red-500 font-bold mr-4">
                        {{ item.price | customCurrency }}
                    </div>
                    <div class="flex items-center">
                        <button class="border px-2 py-1" (click)="decreaseQuantity(item)">
                            -
                        </button>
                        <input class="w-12 text-center border-t border-b py-1" type="text" [value]="item.quantity" />
                        <button class="border px-2 py-1" (click)="increaseQuantity(item)">
                            +
                        </button>
                    </div>
                    <button class="text-gray-500 ml-4" (click)="removeItem(item)">
                        <i class="fas fa-times">
                        </i>
                    </button>
                </div>
                <div class="mb-4">
                    <label class="block mb-2" for="order-notes">
                        Ghi chú đơn hàng
                    </label>
                    <textarea class="w-full border p-2 rounded" id="order-notes" rows="3"></textarea>
                </div>
            </div>
            <div class="w-full lg:w-1/3 bg-gray-50 p-4 rounded shadow mt-4 lg:mt-0 lg:ml-4">
                <div class="flex justify-between items-center mb-4">
                    <span class="font-bold">
                        TỔNG CỘNG
                    </span>
                    <span class="text-red-500 font-bold">
                        {{getTotal() | customCurrency}}
                    </span>
                </div>
                <button class="w-full bg-red-500 text-white py-2 rounded font-bold uppercase transition duration-300 ease-in-out hover:bg-red-600" (click)="openModal()">
                    Thanh Toán
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div *ngIf="isModalOpen" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50">
    <div class="bg-white p-6 rounded shadow-lg w-96">
        <h2 class="text-xl font-bold mb-4">Thông tin thanh toán</h2>
        <form (ngSubmit)="submitOrder()">
            <div class="mb-4">
                <label class="block mb-2" for="name">Tên</label>
                <input class="w-full border p-2 rounded" id="name" [(ngModel)]="orderInfo.name" name="name" required />
            </div>
            <div class="mb-4">
                <label class="block mb-2" for="address">Địa chỉ</label>
                <input class="w-full border p-2 rounded" id="address" [(ngModel)]="orderInfo.address" name="address" required />
            </div>
            <div class="mb-4">
                <label class="block mb-2" for="email">Email</label>
                <input class="w-full border p-2 rounded" id="email" [(ngModel)]="orderInfo.email" name="email" type="email" required />
            </div>
            <div class="mb-4">
                <label class="block mb-2" for="phone">Số điện thoại</label>
                <input class="w-full border p-2 rounded" id="phone" [(ngModel)]="orderInfo.phone" name="phone" type="tel" required />
            </div>
            <div class="flex justify-end">
                <button type="button" class="bg-gray-500 text-white py-2 px-4 rounded mr-2" (click)="closeModal()">Hủy</button>
                <button type="submit" class="bg-red-500 text-white py-2 px-4 rounded">Xác nhận</button>
            </div>
        </form>
    </div>
</div>